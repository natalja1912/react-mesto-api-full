(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{22:function(e,t,a){e.exports=a.p+"static/media/header-logo.855a8c98.svg"},25:function(e,t,a){e.exports=a.p+"static/media/login-success.e38b395c.svg"},26:function(e,t,a){e.exports=a.p+"static/media/login-failure.4072126c.svg"},29:function(e,t,a){e.exports=a(40)},34:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(20),r=a.n(c),s=a(7),i=(a(34),a(1)),u=a(2),l="https://api.pikachu.students.nomoredomains.rocks",p=a(28),m=function(e){var t=e.component,a=Object(p.a)(e,["component"]);return o.a.createElement(u.b,null,(function(){return a.loggedIn?o.a.createElement(t,a):o.a.createElement(u.a,{to:"/signin"})}))},d=a(9),_=a(10),f=a(22),h=a.n(f);var g=function(e){return o.a.createElement("header",{className:"header ".concat(e.classes)},o.a.createElement("img",{className:"header__logo",src:h.a,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f"}),o.a.createElement("div",{className:"header__items"},e.children))};var b=function(e){return o.a.createElement("section",{className:"popup popup_type_".concat(e.name," ").concat(e.isOpen&&"popup_opened")},o.a.createElement("form",{className:"popup__container popup__container_type_".concat(e.name," popup__item"),name:"popup__container_type_".concat(e.name),onSubmit:e.onSubmit,noValidate:!0},o.a.createElement("h2",{className:"popup__heading popup__heading_type_".concat(e.name)},e.title),e.children,o.a.createElement("button",{className:"popup__add-button popup__add-button_type_".concat(e.name),type:"submit"},e.buttonText),o.a.createElement("button",{className:"popup__close-button popup__close-button_type_".concat(e.name),type:"button",onClick:e.onClose})))};var v=function(e){var t=Object(n.useState)({email:"",password:""}),a=Object(i.a)(t,2),c=a[0],r=a[1];function u(e){var t=e.target,a=t.name,n=t.value;r(Object(_.a)(Object(_.a)({},c),{},Object(d.a)({},a,n)))}return o.a.createElement(o.a.Fragment,null,o.a.createElement(g,null,o.a.createElement(s.b,{to:"/signup",className:"header__item header__link"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")),o.a.createElement("div",{className:"register register_type_login"},o.a.createElement(b,{name:"dark",title:"\u0412\u0445\u043e\u0434",buttonText:"\u0412\u043e\u0439\u0442\u0438",isOpen:!0,onSubmit:function(t){return function(t){t.preventDefault(),c.email&&c.password?(e.onLogin({password:c.password,email:c.email}),r({email:"",password:""})):console.log("\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f \u0444\u043e\u0440\u043c\u044b")}(t)}},o.a.createElement("input",{className:"popup__input popup__input_dark",name:"email",placeholder:"Email",required:!0,id:"email",type:"email",value:c.email,onChange:function(e){return u(e)}}),o.a.createElement("input",{className:"popup__input popup__input_dark",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",required:!0,id:"password",type:"password",value:c.password,onChange:function(e){return u(e)}}))))};var E=function(e){var t=Object(n.useState)({email:"",password:""}),a=Object(i.a)(t,2),c=a[0],r=a[1];function u(e){var t=e.target,a=t.name,n=t.value;r(Object(_.a)(Object(_.a)({},c),{},Object(d.a)({},a,n)))}return o.a.createElement(o.a.Fragment,null,o.a.createElement(g,null,o.a.createElement(s.b,{to:"/signin",className:"header__item header__link"},"\u0412\u043e\u0439\u0442\u0438")),o.a.createElement("div",{className:"register"},o.a.createElement(b,{name:"dark",isOpen:!0,title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",buttonText:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",onSubmit:function(t){return function(t){t.preventDefault(),c.email&&c.password?e.onRegister({password:c.password,email:c.email}):console.log("\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f \u0444\u043e\u0440\u043c\u044b")}(t)}},o.a.createElement("input",{className:"popup__input popup__input_dark",name:"email",placeholder:"Email",required:!0,id:"email",type:"email",value:c.email,onChange:function(e){return u(e)}}),o.a.createElement("input",{className:"popup__input popup__input_dark",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",required:!0,id:"password",type:"password",value:c.password,onChange:function(e){return u(e)}})),o.a.createElement("div",{className:"register__signup"},o.a.createElement(s.b,{to:"/signin",className:"register__link"},"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? \u0412\u043e\u0439\u0442\u0438"))))},j=a(27),O=o.a.createContext();var N=function(e){var t=e.card,a=e.handleCard,n=e.handleCardLike,c=e.handleCardDelete,r=o.a.useContext(O),s=r._id===t.owner,i="place__delete-button ".concat(s?"place__delete-button_visible":"place__delete-button_hidden"),u=t.likes.some((function(e){return e===r._id})),l="place__like-button ".concat(u&&"place__like-button_active");return o.a.createElement("div",{className:"place"},o.a.createElement("button",{className:"place__image-button",onClick:function(){a(t)}},o.a.createElement("img",{className:"place__image",src:t.link,alt:t.name})),o.a.createElement("div",{className:"place__info"},o.a.createElement("p",{className:"place__heading"},t.name),o.a.createElement("div",{className:"place__buttons"},o.a.createElement("button",{className:l,onClick:function(){return n(t)},"aria-label":"\u041c\u043d\u0435 \u043d\u0440\u0430\u0432\u0438\u0442\u0441\u044f",type:"button"}),o.a.createElement("button",{className:"place__sumoflikes-button","aria-label":"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043b\u0430\u0439\u043a\u043e\u0432",type:"button"},t.likes?t.likes.length:0))),o.a.createElement("button",{className:i,onClick:function(){return c(t)},"aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",type:"button"}))};var k=function(e){var t=e.cards,a=e.onEditProfile,n=e.onAddPlace,c=e.onEditAvatar,r=e.onCardClick,s=e.handleCardLike,i=e.handleCardDelete,u=o.a.useContext(O),l=t.sort((function(e,t){return e._id<t._id?1:-1}));return o.a.createElement("main",{className:"content"},o.a.createElement("section",{className:"cover"},o.a.createElement("div",{className:"cover__profile"},o.a.createElement("button",{className:"cover__image",style:{backgroundImage:"url(".concat(u.avatar,")")},onClick:c}),o.a.createElement("div",{className:"cover__heading-info"},o.a.createElement("h1",{className:"cover__heading"},u.name),o.a.createElement("button",{className:"cover__edit",onClick:a,"aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",type:"button"})),o.a.createElement("p",{className:"cover__subheading"},u.about)),o.a.createElement("button",{className:"cover__add",onClick:n,"aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",type:"button"})),o.a.createElement("section",{className:"places"},l.map((function(e){return o.a.createElement(N,{key:e._id,card:e,handleCard:r,handleCardLike:function(e){return s(e)},handleCardDelete:function(e){return i(e)}})}))))};var y=function(e){var t=e.card,a=e.onClose;return o.a.createElement("section",{className:"popup popup_type_photo ".concat(t&&"popup_opened")},o.a.createElement("div",{className:"popup__image-group popup__item"},o.a.createElement("img",{className:"popup__image",src:t?t.link:"",alt:t?t.name:""}),o.a.createElement("p",{className:"popup__text popup__text_type_photo"},t?t.name:""),o.a.createElement("button",{className:"popup__close-button popup__close-button_type_photo",onClick:a,type:"button"})))};var C=function(){return o.a.createElement("footer",{className:"footer"},o.a.createElement("p",{className:"footer__copyright"},"\xa92020\xa0Mesto\xa0Russia"))},x=a(23),w=a(24),S=new(function(){function e(t){Object(x.a)(this,e),this._getResponseData=function(e){return e.ok?e.json():Promise.reject(new Error("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status)))},this._url=t.baseUrl}return Object(w.a)(e,[{key:"_getHeaders",value:function(){var e=localStorage.getItem("jwt");return{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this._url,"/cards"),{headers:this._getHeaders()}).then((function(t){return e._getResponseData(t)})).then((function(e){return e}))}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this._url,"/users/me"),{headers:this._getHeaders()}).then((function(t){return e._getResponseData(t)})).then((function(e){return e}))}},{key:"sendUserInfo",value:function(e){var t=this;return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._getHeaders(),body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return t._getResponseData(e)})).then((function(e){return e}))}},{key:"postNewCard",value:function(e){var t=this;return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._getHeaders(),body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return t._getResponseData(e)})).then((function(e){return e.data}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:this._getHeaders()}).then((function(e){return t._getResponseData(e)})).then((function(e){return e}))}},{key:"changeLike",value:function(e,t){var a=this;return fetch("".concat(this._url,"/cards/").concat(e,"/likes"),{method:t?"PUT":"DELETE",headers:this._getHeaders()}).then((function(e){return a._getResponseData(e)})).then((function(e){return e.data}))}},{key:"changeAvatar",value:function(e){var t=this;return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._getHeaders(),body:JSON.stringify({avatar:e})}).then((function(e){return t._getResponseData(e)})).then((function(e){return e}))}}]),e}())({baseUrl:"https://api.pikachu.students.nomoredomains.rocks"});var L=function(e){var t=e.isOpen,a=e.onClose,c=e.onUpdateUser,r=e.isLoading,s=Object(n.useState)(""),u=Object(i.a)(s,2),l=u[0],p=u[1],m=Object(n.useState)(""),d=Object(i.a)(m,2),_=d[0],f=d[1],h=o.a.useContext(O);return Object(n.useEffect)((function(){p(""),f("")}),[a]),o.a.createElement(b,{name:"profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",buttonText:r?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,onClose:function(){p(""),f(""),a()},onSubmit:function(e){return function(e){e.preventDefault(),c({name:l,about:_,avatar:h.avatar})}(e)}},o.a.createElement("label",{className:"popup__input"},o.a.createElement("input",{value:l,onChange:function(e){return p(e.target.value)},type:"text",className:"popup__text popup__text_type_name",name:"popup__text_type_name",placeholder:"\u0418\u043c\u044f \u0438\u0441\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044f",minLength:"2",maxLength:"40",required:!0}),o.a.createElement("span",{className:"popup__input-error"},"\u0412\u044b \u043f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u043b\u0438 \u044d\u0442\u043e \u043f\u043e\u043b\u0435.")),o.a.createElement("label",{className:"popup__input"},o.a.createElement("input",{value:_,onChange:function(e){return f(e.target.value)},type:"text",className:"popup__text popup__text_type_job",name:"popup__text_type_job",placeholder:"\u041f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u044f \u0438\u0441\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044f",minLength:"2",maxLength:"200",required:!0}),o.a.createElement("span",{className:"popup__input-error"},"\u0412\u044b \u043f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u043b\u0438 \u044d\u0442\u043e \u043f\u043e\u043b\u0435.")))};var T=function(e){var t=e.isOpen,a=e.onClose,c=e.onUpdateAvatar,r=e.isLoading,s=o.a.useRef(),u=Object(n.useState)(""),l=Object(i.a)(u,2),p=l[0],m=l[1];return Object(n.useEffect)((function(){m("")}),[a]),o.a.createElement(b,{name:"avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",buttonText:r?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,onClose:function(){m(""),a()},onSubmit:function(e){return function(e){e.preventDefault(),c(s.current.value)}(e)}},o.a.createElement("label",{className:"popup__input"},o.a.createElement("input",{value:p,onChange:function(e){return m(e.target.value)},ref:s,type:"url",className:"popup__text popup__text_type_placelink",name:"popup__text_type_placelink",placeholder:"https://unsplash.com/example.jpg",required:!0}),o.a.createElement("span",{className:"popup__input-error"},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 \u0441\u0430\u0439\u0442\u0430.")))};var I=function(e){var t=e.isOpen,a=e.onClose,c=e.onUpdateCard,r=e.isLoading,s=o.a.useContext(O),u=Object(n.useState)(""),l=Object(i.a)(u,2),p=l[0],m=l[1],d=Object(n.useState)(""),_=Object(i.a)(d,2),f=_[0],h=_[1];return Object(n.useEffect)((function(){m(""),h("")}),[a]),o.a.createElement(b,{name:"place",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",buttonText:r?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,onClose:function(){m(""),h(""),a()},onSubmit:function(e){return function(e){e.preventDefault();var t={name:p,link:f,owner:{_id:s._id},likes:[]};c(t)}(e)}},o.a.createElement("label",{className:"popup__input"},o.a.createElement("input",{value:p,onChange:function(e){return m(e.target.value)},type:"text",className:"popup__text popup__text_type_placename",name:"popup__text_type_placename",placeholder:"\u0413\u043e\u0440\u043d\u044b\u0439 \u0410\u043b\u0442\u0430\u0439",minLength:"2",maxLength:"30",required:!0}),o.a.createElement("span",{className:"popup__input-error"},"\u0412\u044b \u043f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u043b\u0438 \u044d\u0442\u043e \u043f\u043e\u043b\u0435.")),o.a.createElement("label",{className:"popup__input"},o.a.createElement("input",{value:f,onChange:function(e){return h(e.target.value)},type:"url",className:"popup__text popup__text_type_placelink",name:"popup__text_type_placelink",placeholder:"https://unsplash.com/example.jpg",required:!0}),o.a.createElement("span",{className:"popup__input-error"},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 \u0441\u0430\u0439\u0442\u0430.")))};var D=function(e){var t=e.isOpen,a=e.onClose,n=e.onSubmit;function c(e){e.preventDefault(),n(),a()}return o.a.createElement(b,{name:"delete",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",buttonText:"\u0414\u0430",isOpen:t,onClose:a,onSubmit:function(e){return c(e)}})};var P=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(!1),u=Object(i.a)(s,2),l=u[0],p=u[1],m=Object(n.useState)(!1),d=Object(i.a)(m,2),_=d[0],f=d[1],h=Object(n.useState)(!1),b=Object(i.a)(h,2),v=b[0],E=b[1],N=Object(n.useState)(),x=Object(i.a)(N,2),w=x[0],P=x[1],U=Object(n.useState)({}),A=Object(i.a)(U,2),R=A[0],H=A[1],q=Object(n.useState)([]),J=Object(i.a)(q,2),B=J[0],z=J[1],F=Object(n.useState)(!1),M=Object(i.a)(F,2),W=M[0],G=M[1],V=Object(n.useState)({}),$=Object(i.a)(V,2),K=$[0],Q=$[1],X=Object(n.useState)(""),Y=Object(i.a)(X,2),Z=Y[0],ee=Y[1];function te(){r(!1),f(!1),p(!1),E(!1),P(void 0)}Object(n.useEffect)((function(){Promise.all([S.getUserInfo(),S.getInitialCards()]).then((function(e){var t=Object(i.a)(e,2),a=t[0],n=t[1];H(a.data),z(n.data)})).catch((function(e){return console.log(e)}))}),[]);var ae=function(e){"Escape"===e.key&&te()};return Object(n.useEffect)((function(){return document.addEventListener("keydown",ae),function(){return document.removeEventListener("keydown",ae)}}),[]),o.a.createElement("div",{className:"page"},o.a.createElement(O.Provider,{value:R},o.a.createElement(g,{classes:"header_".concat(Z)},o.a.createElement("button",{className:"header__menu-button header__menu-button_".concat(Z),onClick:function(){ee(Z?"":"active")}}),o.a.createElement("div",{className:"header__hidden-items header__hidden-items_".concat(Z)},o.a.createElement("p",{className:"header__item"},e.user),o.a.createElement("button",{className:"header__item header__exit-button",onClick:e.handleExit},"\u0412\u044b\u0439\u0442\u0438"))),o.a.createElement(k,{cards:B,handleCardLike:function(e){return function(e){var t=e.likes.some((function(e){return e===R._id}));S.changeLike(e._id,!t).then((function(t){var a=B.map((function(a){return a._id===e._id?t:a}));z(a)})).catch((function(e){return console.log(e)}))}(e)},handleCardDelete:function(e){return function(e){E(!0),Q(e)}(e)},onEditProfile:function(){r(!0)},onAddPlace:function(){p(!0)},onEditAvatar:function(){f(!0)},onCardClick:function(e){P(e)}}),o.a.createElement(L,{isLoading:W,isOpen:c,onClose:te,onUpdateUser:function(e){return function(e){G(!0),S.sendUserInfo(e).then((function(){te(),H(e)})).catch((function(e){return console.log(e)})).finally((function(){return G(!1)}))}(e)}}),o.a.createElement(I,{isLoading:W,isOpen:l,onClose:te,onUpdateCard:function(e){return function(e){G(!0),S.postNewCard(e).then((function(e){z([e].concat(Object(j.a)(B))),te()})).catch((function(e){return console.log(e)})).finally((function(){return G(!1)}))}(e)}}),o.a.createElement(D,{isOpen:v,onClose:te,onSubmit:function(){S.deleteCard(K._id).then((function(){z(B.filter((function(e){return e._id!==K._id})))})).catch((function(e){return console.log(e)}))}}),o.a.createElement(T,{isLoading:W,isOpen:_,onClose:te,onUpdateAvatar:function(e){return function(e){G(!0),S.changeAvatar(e).then((function(){te(),H({name:R.name,about:R.about,avatar:e})})).catch((function(e){return console.log(e)})).finally((function(){return G(!1)}))}(e)}}),o.a.createElement(y,{card:w,onClose:te}),o.a.createElement(C,null)))},U=a(25),A=a.n(U),R=a(26),H=a.n(R);var q=function(e){return o.a.createElement("div",{className:"modal-window"},o.a.createElement(b,{name:"infotool",isOpen:e.isOpen,onClose:e.onClose},o.a.createElement("img",{className:"modal-window__image",alt:e.text,src:"success"===e.name?A.a:H.a}),o.a.createElement("p",{className:"modal-window__text"},e.text)))};var J=function(){var e=Object(n.useState)({loggedIn:!1,email:""}),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)({active:!1,name:"",text:""}),s=Object(i.a)(r,2),p=s[0],d=s[1],_=Object(n.useState)(!1),f=Object(i.a)(_,2),h=f[0],g=f[1],b=Object(u.g)();function j(e){var t,a;g(!0),(t=e.password,a=e.email,fetch("".concat(l,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:t,email:a})}).then((function(e){return e.ok?e.json():400===e.status?Promise.reject({status:e.status,message:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439"}):Promise.reject({status:e.status,message:e.statusText})})).then((function(e){return console.log(e),localStorage.setItem("jwt",e.token),e}))).then((function(t){t?(c({loggedIn:!0,email:e.email}),d({active:!0,name:"success",text:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!"})):d({active:!0,name:"failure",text:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."})})).catch((function(e){d({active:!0,name:"failure",text:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."}),console.log(e)}))}function O(e){var t,a;(t=e.password,a=e.email,fetch("".concat(l,"/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:t,email:a})}).then((function(e){return e.ok?e.json():400===e.status?Promise.reject({status:e.status,message:"\u041d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439"}):401===e.status?Promise.reject({status:e.status,message:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 email \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"}):Promise.reject({status:e.status,message:e.statusText})}))).then((function(t){t&&(localStorage.setItem("jwt",t.token),c({loggedIn:!0,email:e.email})),t||console.log("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")})).catch((function(e){console.log(e)}))}return Object(n.useEffect)((function(){var e,t=localStorage.getItem("jwt");t&&(e=t,fetch("".concat(l,"/users/me"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.ok?e.json():401===e.status?Promise.reject({status:e.status,message:"\u0422\u043e\u043a\u0435\u043d \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u043d\u0435 \u0432 \u0442\u043e\u043c \u0444\u043e\u0440\u043c\u0430\u0442\u0435"}):Promise.reject({status:e.status,message:e.statusText})}))).then((function(e){e?c({loggedIn:!0,email:e.data.email}):localStorage.removeItem("jwt")})).catch((function(){console.log("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0435")}))}),[]),Object(n.useEffect)((function(){b.push("/cards")}),[a]),o.a.createElement("div",{className:"page"},o.a.createElement("main",{className:"content"},h&&o.a.createElement(q,{name:p.name,text:p.text,isOpen:p.active,onClose:function(){d({active:!1,path:"",text:""})}}),o.a.createElement(u.d,null,o.a.createElement(m,{path:"/cards",loggedIn:a.loggedIn,component:P,user:a.email,handleExit:function(){localStorage.removeItem("jwt"),b.push("/signin")}}),o.a.createElement(u.b,{path:"/signup"},o.a.createElement(E,{onRegister:function(e){return j(e)}})),o.a.createElement(u.b,{path:"/signin"},o.a.createElement(v,{onLogin:function(e){return O(e)}})),o.a.createElement(u.b,{exact:!0,path:"/"},a.loggedIn?o.a.createElement(u.a,{to:"/cards"}):o.a.createElement(u.a,{to:"/signin"})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(s.a,null,o.a.createElement(J,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[29,1,2]]]);
//# sourceMappingURL=main.c2110178.chunk.js.map